// Generated by CoffeeScript 1.7.1
(function() {
  var Finder, Makefile, environment, fs, func, makeOut, makefile, path, result;

  require('coffee-script/register');

  path = require('path');

  fs = require('fs');

  Finder = require('./finder');

  Makefile = require('./makefile');

  environment = require('./environment');

  if (process.argv.length !== 3) {
    console.log('Usage: makemaker <build.coffee>');
    process.exit(1);
  }

  func = require(path.resolve(process.argv[2]));

  makefile = func(Finder, Makefile, environment);

  makefile.generateRules();

  result = makefile.encode();

  makeOut = path.join(makefile.outRoot, 'Makefile');

  fs.writeFileSync(makeOut, result);

}).call(this);
