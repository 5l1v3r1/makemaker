// Generated by CoffeeScript 1.7.1
(function() {
  var Finder, env, fs, path;

  fs = require('fs');

  path = require('path');

  env = require('./environment');

  Finder = (function() {
    function Finder() {
      this.cppSources = [];
      this.cSources = [];
      this.asmSources = [];
    }

    Finder.prototype.search = function(dir) {
      var file, files, newPath, _i, _len, _results;
      if (!fs.existsSync(dir)) {
        return;
      }
      files = fs.readdirSync(dir);
      _results = [];
      for (_i = 0, _len = files.length; _i < _len; _i++) {
        file = files[_i];
        if (file[0] === '.') {
          continue;
        }
        newPath = path.join(dir, file);
        if (fs.lstatSync(newPath).isDirectory()) {
          _results.push(this.search(newPath));
        } else {
          _results.push(this.found(newPath));
        }
      }
      return _results;
    };

    Finder.prototype.found = function(fullPath) {
      var assoc, ext, _ref;
      ext = path.extname(fullPath);
      assoc = {
        '.c': this.cSources,
        '.cc': this.cppSources,
        '.cpp': this.cppSources,
        '.s': this.asmSources
      };
      return (_ref = assoc[ext]) != null ? typeof _ref.push === "function" ? _ref.push(fullPath) : void 0 : void 0;
    };

    return Finder;

  })();

  module.exports = Finder;

}).call(this);
